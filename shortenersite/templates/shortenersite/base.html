{% load static %}
<!DOCTYPE html>
<html>
<head>
 <title>{% block title %}Welcome to mysite{% endblock %}</title>
 <link rel="stylesheet" href="{% static 'shortenersite/css/bootstrap.min.css' %}">
 <style>
     #content {
        margin-top: 20px;
        margin-bottom: 60px;
     }

     a:hover{
        text-decoration: none;
     }

     header {
        border-bottom: 1px solid #eeeeee;
        margin-bottom: 30px;
        padding-bottom: 10px;
        clear: both;
     }

     #wrap {
        max-width: 700px;
        margin: 5px 10px 10px 10px;
        padding: 10px;
        text-align: left;
     }
     #url-result {
        color: #00e000;
        display: hidden;
     }
 </style>

 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
 <meta name="viewport" content="width=device-width, initial-scale=1">

<script type="text/javascript">
 $(function() {
 $('#submitButton').click(function() {
 var patt=new RegExp(/\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost(?=\/)|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]]*))?([\#][^\s\n]*)?\)?/gi)
if($('#url').val()=="")
     $('#url-result').text("Do not submit blank.");
 else if(!patt.test($('#url').val()))
    $('#url-result').text("Make sure that you entered a valid URL");
 else{
 $.ajax({
 type: "POST",
 url: "/makeshort/",
 data: {
 'url' : $('#url').val(),
 'csrfmiddlewaretoken' : $("input[name=csrfmiddlewaretoken]").val()
 },
 success: returnSuccess,
 dataType: 'json'
 });
}
 });
});

function returnSuccess(data, textStatus, jqXHR) {

 $('#url-result').text(data.url);
 $('#url').val("");


}
</script>
</head>

<body>

<div id="wrap">
<header>
 <h1><a href="{% url 'shortenersite:home' %}">URL Shortner</a><small>Shorten the URL</small></h1>
</header>
<div id="content">
{% block content %}

{% endblock %}
</div>
</div>
</body>
</html>
